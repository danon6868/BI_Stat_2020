getwd()
setwd('../../bioinf_institute/statistics/projects/BI_Stat_2020/project_survival/')
getwd()
knitr::opts_chunk$set(
echo = F,
message = FALSE,
warning = FALSE,
include = T
)
knitr::knit_hooks$set(webgl = hook_webgl)
knitr::opts_chunk$set(
echo = F,
message = FALSE,
warning = FALSE,
include = T
)
setwd('../project_survival/')
knitr::opts_chunk$set(
echo = F,
message = F,
warning = F,
include = T
)
library(survival)
library(survminer)
library(ranger)
library(ggplot2)
library(dplyr)
library(ggfortify)
library(coin)
data("ovarian")
force(ovarian)
View(ovarian)
?ovarian
ovarian_data <- ovarian
View(ovarian)
View(ovarian_data)
str(ovarian_data)
ovarian_data <- ovarian
str(ovarian_data)
ovarian_data$fustat <- as.factor(ovarian_data$fustat)
ovarian_data$resid.ds <- as.factor(ovarian_data$resid.ds)
ovarian_data$rx <- as.factor(ovarian_data$rx)
ovarian_data$ecog.ps <- as.factor(ovarian_data$ecog.ps)
str(ovarian_data)
ovarian_data <- ovarian
str(ovarian_data)
ovarian_data$fustat <- as.factor(ovarian_data$fustat)
ovarian_data$resid.ds <- as.factor(ovarian_data$resid.ds)
ovarian_data$rx <- as.factor(ovarian_data$rx)
ovarian_data$ecog.ps <- as.factor(ovarian_data$ecog.ps)
km <- with(ovarian_data, Surv(futime, fustat))
head(km)
library(survival)
library(survminer)
library(ranger)
library(ggplot2)
library(dplyr)
library(ggfortify)
library(coin)
head(km,80)
Surv(futime, fustat)
Surv(data = ovarian_data, futime, fustat)
km <- with(ovarian_data, Surv(futime, fustat))
head(km)
km_fit <- survfit(Surv(futime, fustat) ~ 1, data = ovarian_data)
summary(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
summary(km_fit)
autoplot(km_fit)
km_fit <- survfit(Surv(time, status) ~ 1, data=veteran)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
summary(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
summary(km_fit)
autoplot(km_fit)
km_fit <- survfit(Surv(futime, fustat) ~ 1, data = ovarian_data)
autoplot(km_fit)
summary(km_fit)
autoplot(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
summary(km_fit, times = c(1,30,60,90*(1:10)))
summary(km_fit)
summary(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
autoplot(km_fit)
km_fit <- survfit(Surv(time, status) ~ 1, data=veteran)
summary(km_fit)
summary(km_fit)
km_fit <- survfit(Surv(futime, fustat) ~ 1, data = ovarian_data)
summary(km_fit)
data(veteran)
force(veteran)
View(veteran)
head(km)
head(km, 80)
head(km, 20)
View(veteran)
View(veteran)
km_fit <- survfit(Surv(time, status) ~ 1, data=veteran)
autoplot(km_fit)
km_fit <- survfit(Surv(futime, fustat) ~ 2, data = ovarian_data)
km_fit <- survfit(Surv(futime, fustat) ~ ., data = ovarian_data)
km_fit <- survfit(Surv(futime, fustat) ~ 1, data = ovarian_data)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
km_trt_fit <- survfit(Surv(time, status) ~ trt, data=veteran)
autoplot(km_trt_fit)
km_fit <- survfit(Surv(futime, fustat) ~ rx, data = ovarian_data)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
km_fit <- survfit(Surv(futime, fustat) ~ 1, data = ovarian_data)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
km <- with(ovarian_data, Surv(futime))
km_fit <- survfit(Surv(futime) ~ 1, data = ovarian_data)
autoplot(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
km_fit <- survfit(Surv(futime) ~ 1, data = ovarian_data)
autoplot(km_fit)
summary(km_fit, times = c(1,30,60,90*(1:10)))
summary(km_fit)
summary(km_fit)
autoplot(km_fit)
km_fit <- survfit(Surv(time, prior) ~ 1, data=veteran)
autoplot(km_fit)
km_fit <- survfit(Surv(time, status) ~ 1, data=veteran)
autoplot(km_fit)
ovarian_data$status <- ovarian_data$fustat
km_fit <- survfit(Surv(futime, status) ~ 1, data = ovarian_data)
autoplot(km_fit)
data <- ovarian
# Kaplan Meier Survival Curve
km <- with(data, Surv(futime, fustat))
km_fit <- survfit(Surv(futime, fustat) ~ 1, data=data)
autoplot(km_fit)
# Kaplan Meier Survival Curve
km <- with(ovarian_data, Surv(futime, fustat))
km_fit <- survfit(Surv(futime, fustat) ~ 1, data=ovarian_data)
autoplot(km_fit)
ovarian_data <- ovarian
ovarian_data <- ovarian
str(ovarian_data)
ovarian_data$resid.ds <- as.factor(ovarian_data$resid.ds)
ovarian_data$rx <- as.factor(ovarian_data$rx)
ovarian_data$ecog.ps <- as.factor(ovarian_data$ecog.ps)
km <- with(ovarian_data, Surv(futime))
head(km, 20)
ovarian_data$status <- ovarian_data$fustat
ovarian_data <- ovarian
str(ovarian_data)
ovarian_data$resid.ds <- as.factor(ovarian_data$resid.ds)
ovarian_data$rx <- as.factor(ovarian_data$rx)
ovarian_data$ecog.ps <- as.factor(ovarian_data$ecog.ps)
km <- with(ovarian_data, Surv(futime))
head(km, 20)
km_fit <- survfit(Surv(futime, status) ~ 1, data = ovarian_data)
km <- with(ovarian_data, Surv(futime, fustat))
head(km, 20)
km_fit <- survfit(Surv(futime, fustat) ~ 1, data = ovarian_data)
summary(km_fit)
autoplot(km_fit)
# Kaplan Meier Survival Curve
km <- with(data, Surv(time, status))
head(km, 80)
# Kaplan Meier Survival Curve
km <- with(veteran, Surv(time, status))
km_fit <- survfit(Surv(time, status) ~ 1, data=veteran)
summary(km_fit, times = c(1,30,60,90*(1:10)))
autoplot(km_fit)
km_rx_fit <- survfit(Surv(futime, fustat) ~ rx, data = ovarian_data)
autoplot(km_rx_fit)
ovarian_data <- ovarian_data %>%  mutate(age_factor = ifelse((age < 60), "lt60", "ov60"),
age_factor = factor(age_factor))
km_age_fit <- survfit(Surv(futime, fustat) ~ age_factor, data = ovarian_data)
autoplot(km_age_fit)
ovarian_data <- ovarian_data %>%  mutate(age_factor = ifelse((age < 60), "LT_60", "OV_60"),
age_factor = factor(age_factor))
km_age_fit <- survfit(Surv(futime, fustat) ~ age_factor, data = ovarian_data)
autoplot(km_age_fit)
vet <- mutate(veteran, AG = ifelse((age < 60), "LT60", "OV60"),
AG = factor(AG),
trt = factor(trt,labels=c("standard","test")),
prior = factor(prior,labels=c("N0","Yes")))
km_AG_fit <- survfit(Surv(time, status) ~ AG, data=vet)
autoplot(km_AG_fit)
vet_two_factors <- vet
vet_two_factors$hyb_fact <- paste(vet_two_factors$AG, vet_two_factors$trt)
km_AG_fit_tr <- survfit(Surv(time, status) ~ hyb_fact, data=vet_two_factors)
autoplot(km_AG_fit_tr )
